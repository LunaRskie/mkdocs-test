
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://192.168.2.182/dir1/HQ1/DS2%20-%20Distribution%20Switch%202/">
      
      
        <link rel="prev" href="../DS1%20-%20Distribution%20Switch%201/">
      
      
        <link rel="next" href="../IR1%20-%20Internal%20Router%201/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Config - ITNSA</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Courier+Primer:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Courier Primer";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#config" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ITNSA" class="md-header__button md-logo" aria-label="ITNSA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ITNSA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Config
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ITNSA" class="md-nav__button md-logo" aria-label="ITNSA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ITNSA
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to MkDocs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CML%20Installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CML Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dir1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Dir1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ISP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    BR1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            BR1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BR1/AS3%20-%20Access%20Switch%203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AS3   Access Switch 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BR1/BR1%20-%20Branch%20Router%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    BR2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            BR2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BR2/AS4%20-%20Access%20Switch%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BR2/BR2%20-%20Branch%20Router%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    HQ1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            HQ1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AS1%20-%20Access%20Switch%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CR1%20-%20Core%20Router%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CR1   Core Router 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CR2%20-%20Core%20Router%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CR2   Core Router 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DS1%20-%20Distribution%20Switch%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#complete-config" class="md-nav__link">
    <span class="md-ellipsis">
      Complete Config
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../IR1%20-%20Internal%20Router%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    HQ2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            HQ2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HQ2/AS2%20-%20Access%20Switch%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HQ2/CR3%20-%20Core%20Router%203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CR3   Core Router 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HQ2/CR4%20-%20Core%20Router%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CR4   Core Router 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HQ2/DS3%20-%20Distribution%20Switch%203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HQ2/DS4%20-%20Distribution%20Switch%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HQ2/IR2%20-%20Internal%20Router%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#complete-config" class="md-nav__link">
    <span class="md-ellipsis">
      Complete Config
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="config">Config</h1>
<ul>
<li>Execute [[Common Configs]].</li>
</ul>
<pre><code>enable
conf t
clock timezone UTC +8
clock summer-time PH recurring last Sun Mar 2:00 last Sun Oct 3:00

enable algorithm-type scrypt secret Skill39@Manila
username admin privilege 15 algorithm-type scrypt secret Skill39@Manila

no ip domain-lookup

ip domain-name wsa2025.net
crypto key generate rsa modulus 2048
ip ssh version 2

line console 0
login local
exec-timeout 0 0
line vty 0 4
login local
exec-timeout 0 0
logging synchronous
transport input ssh

end
write memory
</code></pre>
<ul>
<li>Configure [[L2 Services#VLAN Trunking Protocol|VTP]].</li>
</ul>
<pre><code>en
conf t
vtp mode off
vtp domain WSA2025
end
wr

</code></pre>
<ul>
<li>Set [[L2 Services#VLAN Interfaces|VLAN Interfaces]] and set IP according to the [[Cisco Environment#IP Configuration|table]]. Configure [[L2 Services#Hot Standby Router Protocol|HSRP]].</li>
</ul>
<pre><code>en
conf t
vlan 100
name SERVER
vlan 101
name CLIENT_1
vlan 102
name CLIENT_2
vlan 103
name MGMT
vlan 888
name Native
vlan 999
name L3_P2P
exit

int vlan 100
no sh
ip address 10.10.100.12 255.255.255.0
standby 100 ip 10.10.100.10
standby 100 preempt # Compare priority when back online

int vlan 101
no sh
ip address 10.10.101.12 255.255.255.0
standby 101 ip 10.10.101.10
standby 101 preempt

int vlan 102
no sh
ip address 10.10.102.12 255.255.255.0
standby 102 ip 10.10.102.10
standby 102 preempt

int vlan 103
no sh
ip address 10.10.103.12 255.255.255.0
standby 103 ip 10.10.103.10
standby 103 preempt

int vlan 888
no sh

int vlan 999
no sh
ip address 10.10.0.142 255.255.255.252

int lo1
no sh
ip address 10.10.0.5 255.255.255.255

int g0/0
no sh
no sw
ip address 10.10.0.126 255.255.255.252

int g0/1
no sh
no sw
ip address 10.10.0.134 255.255.255.252

end
wr

</code></pre>
<ul>
<li>Configure [[L2 Services#Spanning-tree|spanning-tree]]. This is the root bridge.</li>
</ul>
<pre><code>en
conf t
spanning-tree mode rapid-pvst
spanning-tree vlan 1-4094 priority 4096 # Lower is preferred
end
wr

</code></pre>
<ul>
<li>Configure [[L2 Services#LACP Redundancy and Load-Balancing|LACP]] on <code>g0/2</code> and <code>g1/0</code>.</li>
</ul>
<pre><code>en
conf t
port-channel load-balance src-dst-ip

int range g0/2,g1/0
no sh
channel-group 12 mode active
end
wr

</code></pre>
<ul>
<li>Configure trunk link on ports <code>po12</code> and <code>g0/3</code>:</li>
</ul>
<pre><code>en
conf t
int range po12,g0/3
no sh
switchport trunk encapsulation dot1q
switchport mode trunk
int g0/3
switchport trunk native vlan 888
end
wr

</code></pre>
<ul>
<li>Configure [[L3 Services - IPv4 and HSRP#Open Shortest Path First (OSPF)|OSPF]]. Ensure <code>ip routing</code> is enabled.<ul>
<li>Advertise the ff. networks:</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Network</strong></th>
<th><strong>Area</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>10.10.100.0/24</td>
<td>10</td>
</tr>
<tr>
<td>10.10.101.0/24</td>
<td>10</td>
</tr>
<tr>
<td>10.10.102.0/24</td>
<td>10</td>
</tr>
<tr>
<td>10.10.103.0/24</td>
<td>10</td>
</tr>
<tr>
<td>10.10.0.4/32</td>
<td>0</td>
</tr>
<tr>
<td>10.10.0.120/30</td>
<td>0</td>
</tr>
<tr>
<td>10.10.0.128/30</td>
<td>0</td>
</tr>
</tbody>
</table>
<pre><code>en
conf t

router ospf 100
router-id 10.10.0.5

passive-interface default
no passive-interface g0/0
no passive-interface g0/1
no passive-interface vlan999

network 10.10.0.5 0.0.0.0 area 0
network 10.10.0.124 0.0.0.3 area 0
network 10.10.0.132 0.0.0.3 area 0
network 10.10.0.140 0.0.0.3 area 0
network 10.10.100.0 0.0.0.3 area 10
network 10.10.101.0 0.0.0.3 area 10
network 10.10.102.0 0.0.0.3 area 10
network 10.10.103.0 0.0.0.3 area 10
area 10 range 10.10.100.0 255.255.252.0
exit

int range g0/0-1,vlan999
ip ospf network point-to-point
end
wr

</code></pre>
<ul>
<li>VLAN 102 ACL.</li>
</ul>
<pre><code>enable
configure terminal

# Permit will be matched by the
ip access-list extended SVR_ACL
permit ip 10.10.102.0 0.0.0.255 host 10.10.100.101
permit ip 10.11.102.0 0.0.0.255 host 10.10.100.101
permit ip 10.1.102.0 0.0.0.255 host 10.10.100.101
permit ip 10.2.102.0 0.0.0.255 host 10.10.100.101
exit

# Switch local SVI and HSRP IP (Considered as local. ACLs do not apply)
vlan access-map BLOCK_102 10
match ip address SVR_ACL
action drop
exit

# Allow implicit drop
vlan access-map BLOCK_102
action forward

end
wr
</code></pre>
<h3 id="complete-config">Complete Config</h3>
<pre><code>enable
conf t
clock timezone UTC +8
clock summer-time PH recurring last Sun Mar 2:00 last Sun Oct 3:00
enable algorithm-type scrypt secret Skill39@Manila
username admin privilege 15 algorithm-type scrypt secret Skill39@Manila
no ip domain-lookup
ip domain-name wsa2025.net
crypto key generate rsa modulus 2048
ip ssh version 2
line console 0
login local
exec-timeout 0 0
line vty 0 4
login local
exec-timeout 0 0
logging synchronous
transport input ssh
exit

vtp mode off
vtp domain WSA2025

vlan 100
name SERVER
vlan 101
name CLIENT_1
vlan 102
name CLIENT_2
vlan 103
name MGMT
vlan 888
name Native
vlan 999
name L3_P2P
exit

int vlan 100
no sh
ip address 10.10.100.12 255.255.255.0
standby 100 ip 10.10.100.10
standby 100 preempt
int vlan 101
no sh
ip address 10.10.101.12 255.255.255.0
standby 101 ip 10.10.101.10
standby 101 preempt
int vlan 102
no sh
ip address 10.10.102.12 255.255.255.0
standby 102 ip 10.10.102.10
standby 102 preempt
int vlan 103
no sh
ip address 10.10.103.12 255.255.255.0
standby 103 ip 10.10.103.10
standby 103 preempt
int vlan 888
no sh
int vlan 999
no sh
ip address 10.10.0.142 255.255.255.252
int lo1
no sh
ip address 10.10.0.5 255.255.255.255
int g0/0
no sh
no sw
ip address 10.10.0.126 255.255.255.252
int g0/1
no sh
no sw
ip address 10.10.0.134 255.255.255.252
exit

spanning-tree mode rapid-pvst
spanning-tree vlan 1-4094 priority 4096

port-channel load-balance src-dst-ip
int range g0/2,g1/0
no sh
channel-group 12 mode active

int range po12,g0/3
no sh
switchport trunk encapsulation dot1q
switchport mode trunk
int g0/3
switchport trunk native vlan 888
exit

ip routing
router ospf 100
passive-interface default
no passive-interface g0/0
no passive-interface g0/1
no passive-interface vlan999
router-id 10.10.0.5
network 10.10.0.5 0.0.0.0 area 0
network 10.10.0.124 0.0.0.3 area 0
network 10.10.0.132 0.0.0.3 area 0
network 10.10.0.140 0.0.0.3 area 0
network 10.10.100.0 0.0.0.255 area 10
network 10.10.101.0 0.0.0.255 area 10
network 10.10.102.0 0.0.0.255 area 10
network 10.10.103.0 0.0.0.255 area 10
area 10 range 10.10.100.0 255.255.252.0
exit
int range g0/0-1,vlan999
ip ospf network point-to-point

ip access-list extended SVR_ACL
permit ip 10.10.102.0 0.0.0.255 host 10.10.100.101
permit ip 10.11.102.0 0.0.0.255 host 10.10.100.101
permit ip 10.1.102.0 0.0.0.255 host 10.10.100.101
permit ip 10.2.102.0 0.0.0.255 host 10.10.100.101
exit
vlan access-map BLOCK_102 10
match ip address SVR_ACL
action drop
exit
vlan access-map BLOCK_102
action forward


end
wr

</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>